kubernetesClusterDomain: cluster.local

# Node scheduling configuration
nodeSelector: {}
  # Example usage:
  # nodetype: coreservices

tolerations: []
  # Example usage:
  # - key: nodetype
  #   operator: Equal
  #   value: coreservices
  #   effect: NoSchedule

affinity: {}
  # Example usage:
  # nodeAffinity:
  #   requiredDuringSchedulingIgnoredDuringExecution:
  #     nodeSelectorTerms:
  #     - matchExpressions:
  #       - key: nodetype
  #         operator: In
  #         values:
  #         - coreservices

dataIngestionService:
  image:
    repository: aktosecurity/data-ingestion-service
    digest: sha256:036cd45c3d6c68aba5df329f2c4208514622586708568bf63d1b96765db5fa20
  imagePullPolicy: Always

  env:
    aktoTrafficBatchSize: "100"
    aktoTrafficBatchTimeSecs: "10"
    aktoKafkaBrokerUrl: akto-mini-runtime-mini-runtime:9092
    aktoKafkaProducerBatchSize: "10"
    aktoKafkaProducerLingerMs: "10"
    aktoKafkaTopicName: "akto.api.logs"
    aktoLogLevel: "WARN"

  resources:
    requests:
      cpu: 500m
      memory: "512Mi"
    limits:
      cpu: 1
      memory: "1Gi"

  replicas: 1

  service:
    type: LoadBalancer
    port: 8080
    targetPort: 8080
    internal: true
    # Comma-separated subnet IDs, e.g., "subnet-xxx,subnet-yyy,subnet-zzz"
    subnets: ""

  restartPolicy: Always

  # Kafka SASL Authentication
  useSasl: false  # Set to true to enable SASL authentication

  kafka:
    # SASL mechanism: PLAIN, SCRAM-SHA-256, or SCRAM-SHA-512
    saslMechanism: "SCRAM-SHA-256"
    saslUsername: ""
    saslPassword: ""

    # SSL/TLS configuration
    # Set to true if connecting via SSL/TLS (e.g., NLB with SSL termination)
    useSsl: false
    # Security protocol: PLAINTEXT, SASL_PLAINTEXT, SASL_SSL, SSL
    securityProtocol: "SASL_PLAINTEXT"

    useSecretsForSaslCredentials: false
    saslCredentialsSecrets:
      existingSecret: "akto-mini-runtime-mini-runtime-sasl"  # Name of existing secret of mini-runtime (e.g., "akto-kafka-sasl")
      username: ""
      password: ""  